<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lugares</title>
  <link rel="stylesheet" href="allstyle.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet" />
  <style>
    body {
      background: #f4f4f6;
      color: #222;
      font-family: 'Segoe UI', Arial, sans-serif;
      padding: 0;
      margin: 0;
    }
    .category-filter {
      position: sticky;
      top: 0;
      z-index: 10;
      margin: 20px 0 0 0;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      width: 100%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      background: #f4f4f600;
      box-shadow: 0 2px 8px #0001;
      padding-top: 6px;
      padding-bottom: 6px;
      transition: box-shadow 0s, background 0.3s, transform 0.3s;
    }
    .category-filter.stuck {
      background: #00000000;
      transform: scale(1.02) translateY(-4px);
    }
    .filter-btn {
      align-self: center;
      background: #222;
      color: #fff;
      border: none;
      padding: 12px 18px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1.05rem;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s;
      width: 350px;
      justify-content: center;
      box-shadow: 0 2px 8px #0002;
    }
    .filter-btn:hover {
      background: #444;
    }
    .filter-options {
      align-self: center;
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 12px;
      opacity: 1;
      transition: opacity 0.4s, transform 0.4s;
      transform: scale(1);
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 12px #0002;
      padding: 12px 0;
      width: 350px;
      z-index: 2;
      position: absolute;
      top: 50px;
    }
    .filter-options.hidden {
      opacity: 0;
      pointer-events: none;
      transform: scale(0.7) translateY(-10px);
    }
    .cat-btn {
      background: #f4f4f6;
      border: none;
      color: #222;
      border-radius: 16px;
      padding: 10px 18px 10px 14px;
      cursor: pointer;
      font-size: 1.05rem;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.2s, color 0.2s;
      width: 95%;
      margin: 0 auto;
      text-align: left;
    }
    .cat-btn:hover, .cat-btn.active {
      background: #222;
      color: #fff;
    }
    .cat-icon {
      font-size: 1.3em;
      vertical-align: middle;
      color: #888;
      transition: color 0.2s;
    }
    .cat-btn.active .cat-icon,
    .cat-btn:hover .cat-icon {
      color: #fff;
    }
    .lugares-container {
      display: flex;
      flex-direction: column;
      gap: 32px;
      margin: 30px auto 0 auto;
      max-width: 600px;
      width: 100%;
      padding-bottom: 80px;
    }
    .lugar-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 8px #0001;
      padding: 0 0 20px 0;
      width: 100%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 0;
      overflow: hidden;
    }
    .carousel {
      width: 100%;
      position: relative;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #eee;
      min-height: 220px;
    }
    .carousel-prev, .carousel-next {
      background: #e0e0e0cc;
      border: none;
      color: #222;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.5em;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0.85;
      box-shadow: 0 2px 8px #0002;
    }
    .carousel-prev {
      left: 16px;
    }
    .carousel-next {
      right: 16px;
    }
    .carousel-prev:hover, .carousel-next:hover {
      background: #222;
      color: #fff;
    }
    .lugar-img {
      width: 90%;
      height: 260px;
      object-fit: cover;
      border-radius: 20px;
      background: #e0e0e0;
      display: block;
      margin: 0;
      transition: box-shadow 0.2s;
      cursor: pointer;
    }
    .lugar-info {
      flex: 1;
      min-width: 0;
      padding: 18px 18px 0 18px;
      width: 100%;
      box-sizing: border-box;
    }
    .lugar-title {
      font-size: 1.18rem;
      font-weight: bold;
      margin-bottom: 6px;
      color: #222;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
      letter-spacing: 0.5px;
    }
    .lugar-desc {
      font-size: 1.01rem;
      margin-bottom: 10px;
      color: #4a627a;
      background: #f7f7fa;
      border-left: 4px solid #bdbdbd;
      border-radius: 6px;
      padding: 8px 12px;
      transition: background 0.2s, border-color 0.2s;
    }
    .maps-btn {
      background: #222;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 7px 14px;
      font-size: 0.98rem;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 2px;
    }
    .maps-btn:hover {
      background: #444;
    }
    .search-container {
      position: relative;
      max-width: 340px;
      width: 100%;
      margin-top: 0%;
      display: flex;
      margin-left: auto;
      margin-right: auto;
    }
    #buscador {
      width: 100%;
      padding: 12px 40px 12px 16px;
      border-radius: 24px;
      border: none;
      background: #fff;
      font-size: 1rem;
      color: #222;
      box-shadow: 0 2px 8px #0001;
      outline: none;
      border: 1px solid #ccc;
    }
    .lugar-mas-info {
      display: none;
      font-size: 0.99rem;
      color: #4a627a;
      background: #e9f0fa;
      border-left: 4px solid #222;
      border-radius: 6px;
      padding: 10px 14px;
      margin-bottom: 10px;
      margin-top: 2px;
      animation: fadeIn 0.3s;
      box-shadow: 0 1px 6px #1976d210;
      line-height: 1.5;
    }
    .lugar-mas-info.visible {
      display: block;
    }
    .lugar-actividades-info {
      display: none;
      font-size: 0.99rem;
      color: #4a627a;
      background: #e9f0fa;
      border-left: 4px solid #222;
      border-radius: 6px;
      padding: 10px 14px;
      margin-bottom: 10px;
      margin-top: 2px;
      animation: fadeIn 0.3s;
      box-shadow: 0 1px 6px #1976d210;
      line-height: 1.5;
    }
    .lugar-actividades-info.visible {
      display: block;
    }
    .ver-mas-btn {
      background: #e0e0e0;
      color: #222;
      border: none;
      border-radius: 8px;
      padding: 7px 14px;
      font-size: 0.98rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      margin-bottom: 6px;
      margin-top: 0;
      font-weight: 500;
      letter-spacing: 0.2px;
    }
    .ver-mas-btn.active {
      background: #222;
      color: #fff;
    }
    .actividades-btn {
      background: #e0e0e0;
      color: #222;
      border: none;
      border-radius: 8px;
      padding: 7px 14px;
      font-size: 0.98rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      font-weight: 500;
      letter-spacing: 0.2px;
    }
    .actividades-btn.active {
      background: #222;
      color: #fff;
    }
    .ver-mas-btn,
    .maps-btn,
    .actividades-btn {
      height: 38px;
      display: flex;
      align-items: center;
      box-sizing: border-box;
    }
    .lugar-card .lugar-info > div.botones-centrados {
      display: flex;
      gap: 8px;
      justify-content: center;
      align-items: center;
      margin-top: 8px;
      width: 100%;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px);}
      to { opacity: 1; transform: translateY(0);}
    }
    @media (max-width: 800px) {
      .lugares-container, .category-filter {
        max-width: 100vw;
      }
      .lugar-card {
        border-radius: 0;
      }
      .lugar-img {
        height: 230px;
        border-radius: 20px;
      }
    }
    @media (max-width: 600px) {
      .lugares-container, .category-filter {
        max-width: 100vw;
      }
      .lugar-card {
        border-radius: 0;
      }
      .lugar-img {
        height: 230px;
        border-radius: 20px;
      }
      .lugar-info {
        padding-left: 8px;
        padding-right: 8px;
      }
      .carousel-prev, .carousel-next {
        width: 32px;
        height: 32px;
        font-size: 1.2em;
      }
    }
    .img-modal-overlay {
      display: none;
      position: fixed;
      z-index: 1000;
      inset: 0;
      background: rgba(0,0,0,0.92);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s;
    }
    .img-modal-overlay.active {
      display: flex;
    }
    .img-modal-content {
      position: relative;
      max-width: 95vw;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .img-modal-img {
      max-width: 96vw;
      max-height: 70vh;
      border-radius: 12px;
      box-shadow: 0 4px 24px #0008;
      margin-bottom: 18px;
    }
    .img-modal-close {
      position: absolute;
      top: -18px;
      right: -18px;
      background: #fff;
      color: #222;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.8rem;
      cursor: pointer;
      box-shadow: 0 2px 8px #0004;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .img-modal-close:hover {
      background: #f44336;
      color: #fff;
    }
    .img-modal-download {
      background: #222;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 9px 22px;
      font-size: 1.08rem;
      cursor: pointer;
      font-weight: 500;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.2s;
    }
    .img-modal-download:hover {
      background: #ffffff;
      color: #222;
    }
  </style>
</head>
<body>
  <nav class="nav-bottom">
    <a href="index.html" class="nav-item active">
      <span class="material-symbols-outlined">home</span>
      <span class="nav-label">Inicio</span>
    </a>
    <a href="ubicación.html" class="nav-item">
      <span class="material-symbols-outlined">Cloud</span>
      <span class="nav-label">Clima</span>
    </a>
    <a href="descubrir.html" class="nav-item">
      <span class="material-symbols-outlined">explore</span>
      <span class="nav-label">Parroquias para Descubrir</span>
    </a>

  </nav>

  <main>
    <br>
    <div class="search-container">
      <input type="text" id="buscador" placeholder="Buscar" autocomplete="off" />
    </div>
    <div class="category-filter">
      <button id="toggleFilter" class="filter-btn">
        <span class="material-symbols-outlined">filter_alt</span>
      </button>
      <div id="filterOptions" class="filter-options hidden">
        <button class="cat-btn" data-category="ninguno">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">Delete</span>
          Eliminar filtro
        </button>
        <button class="cat-btn" data-category="parques">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">park</span>
          Parques
        </button>
        <button class="cat-btn" data-category="iglesias">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">church</span>
          Iglesias
        </button>
        <button class="cat-btn" data-category="museos">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">museum</span>
          Museos
        </button>
        <button class="cat-btn" data-category="monumentos">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">account_balance</span>
          Monumentos
        </button>
        <button class="cat-btn" data-category="plazas">
          <span class="material-symbols-outlined cat-icon" style="font-variation-settings: 'FILL' 1;">location_city</span>
          Plazas
        </button>
      </div>
    </div>
    <div id="lugaresContainer" class="lugares-container"></div>
  </main>

  <div id="imgModal" class="img-modal-overlay">
    <div class="img-modal-content">
      <button class="img-modal-close" id="closeImgModal" aria-label="Cerrar imagen">&times;</button>
      <img src="" alt="Imagen ampliada" class="img-modal-img" id="imgModalImg" />
      <a id="downloadImgBtn" class="img-modal-download" download target="_blank" title="Descargar">
        <span class="material-symbols-outlined" style="font-size:1.6em;vertical-align:middle;">download</span>
      </a>
    </div>
  </div>

  <script>
const lugares = [
  {
    nombre: "Basílica de la Virgen del Cisne",
    categoria: "iglesias",
    descripcion: "Imponente templo gótico peregrinado cada agosto.",
    imagenes: [
      "basilica_el_cisne/cisne1.jpg",
      "basilica_el_cisne/cisne2.jpg",
      "basilica_el_cisne/cisne3.jpg",
      "basilica_el_cisne/cisne6.jpg",
      "basilica_el_cisne/cisne7.jpg",
      "basilica_el_cisne/cisne9.jpg",
      "basilica_el_cisne/cisne10.jpg",

    ],
    lat: -3.8520273640781855,
    lng: -79.42608179907411,
    infoExtra: "El templo es imponente en sí y mayor grandiosidad le da su ubicación en la cumbre de una escarpada montaña y rodeado de modestas construcciones tradicionales. En su interior se venera una imagen de la Virgen María tallada en cedro, a fines del siglo XVI por Don Diego de Robles.<br>Toda Loja dedica seis meses al año a peregrinaciones, misas y fiestas con música en honor a esta virgen. Las peregrinaciones empiezan el primero de mayo, por el mes de María, con la sesión del cabildo ampliado de Loja en el Santuario. En julio se intensifican las visitas de fieles hasta llegar en agosto a unos 300.000.<br>El templo fue construido con los elementos de la arquitectura gótica y su tamaño y color contrasta con la sencillez de las casas campesinas del poblado del mismo nombre. Su ubicación en la cumbre de la montaña la convirtió en destino apropiado para el cumplimiento de penitencias, por esto, miles de fieles llegan cada año, en el mes de septiembre, a rendirle tributo y a pedir bendiciones. En el mes de agosto se realiza una procesión impresionante.",
    actividades: [
      "Escuchar misa cada 2 horas",
      "Recorrer y admirar su arquitectura de estilo semigótico"
    ]
  },
  {
    nombre: "Parque Nacional Podocarpus",
    categoria: "parques",
    descripcion: "Reserva de megadiversidad entre páramo y bosque nublado.",
    imagenes: [
      "podocarpus/podocarpus2.jpg",
      "podocarpus/podocarpus3.jpg",
      "podocarpus/podocarpus4.jpg",
      "podocarpus/podocarpus5.jpg",
      "podocarpus/podocarpus6.jpg",
      "podocarpus/podocarpus1.jpg",
      "podocarpus/podocarpus7.jpg",


    ],
    lat: -4.083466,
    lng: -79.205463,
    infoExtra: "El Parque Nacional Podocarpus, ubicado en la provincia de Loja, Ecuador, es una reserva natural que se extiende a lo largo de la cordillera de los Andes. Este parque es conocido por su rica biodiversidad, albergando más de 4.000 especies de plantas y una variedad de animales, incluyendo osos de anteojos, pumas y dantas. Los visitantes pueden disfrutar de actividades como caminatas, observación de aves, campamentos y visitas guiadas, y explorar senderos que llevan a cascadas, lagunas y miradores panorámicos. El parque también actúa como un importante reservorio de agua en la región. Es esencial seguir las reglas del parque para preservar su diversidad natural. Además, las Cataratas del Inca ofrecen una experiencia única de conexión con la naturaleza y admiración de la belleza del entorno. Se recomienda usar calzado adecuado para las caminatas o senderos que llevan a la cascada.<br>Creado en 1982, el parque cuenta con 146 280 hectáreas ubicadas en una zona de gran biodiversidad y endemismo en la región sur del país. Se encuentra en las provincias de Zamora Chinchipe y Loja, entre la Amazonía y los Andes. Sus montañas constituyen barreras geográficas que albergan humedad y microclimas que propician una extraordinaria biodiversidad, dando vida a páramos, bosques nublados y zonas de matorral.",
    actividades: [
      "Recorrer los senderos autorizados",
      "Se puede tomar fotos",
      "Se puede realizar tomas con dron mientras no dañen la fauna"
    ]
  },
  {
    nombre: "Museo de la Cultura Lojana",
    categoria: "museos",
    descripcion: "Museo en una casa patrimonial del siglo XVIII que exhibe arte, arqueología y etnografía local.",
    imagenes: [
      "el_sagrario/museo_de_la_cultura_lojana/museoCL8.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL2.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL1.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL3.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL4.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL5.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL6.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL7.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL9.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL10.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL11.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL12.jpg",
      "el_sagrario/museo_de_la_cultura_lojana/museoCL13.jpg"
    ],
    lat: -3.997285, 
    lng: -79.201559,
    infoExtra: "La Plaza Central de Loja es uno de sus espacios públicos más importantes, rodeada de atractivos como el Museo Arqueológico, la iglesia Catedral, y el Museo Matilde Hidalgo de Procel. En el centro de la Plaza se encuentra una escultura de Bernardo Valdivieso, que fuera benefactor del colegio Bernardo Valdivieso. Aquí se realizan las manifestaciones de religioso cívico y político, a su alrededor se encuentran las edificaciones de gobierno como: Municipalidad, Gobernación de la Provincia, Consejo Provincial, Casa Episcopal, Museo del Banco Central del Ecuador; cercano al parque se cuenta con instituciones bancarias y comerciales que son indicadores de una ciudad progresista.",
    actividades: [
      "Explorar salas temáticas",
      "Fotografía histórica",
      "Talleres y eventos culturales"
    ]
  },
  {
    nombre: "Iglesia de Santo Domingo de Guzmán",
    categoria: "iglesias",
    descripcion: "Iglesia colonial con retablos y altar mayor.",
    imagenes: [
      "images/iglesia_santo_domingo.jpg"
    ],
    lat: -3.9989115,
    lng: -79.2016965,
    infoExtra: "La Iglesia de Santo Domingo es una joya arquitectónica que combina varios estilos artísticos en su diseño. Desde el exterior, su fachada capta la atención de inmediato gracias a su fusión de elementos barrocos y renacentistas, una sinfonía visual que narra la historia y evolución de la arquitectura colonial en Ecuador.<br>La iglesia está ubicada en el corazón de la ciudad, rodeada de una plaza que acentúa su majestuosidad. El contraste entre los tonos cálidos de sus paredes coloniales y el cielo azul de Loja crea una vista inolvidable para aquellos que la visitan. Es un lugar ideal para los amantes de la fotografía, quienes encuentran en este templo una infinidad de perspectivas y detalles únicos que capturar. La luz natural que se filtra a través de sus vitrales ilumina el interior de manera sublime, resaltando los altares decorados con dorados y los frescos que adornan las paredes.",
    actividades: [
      "Se puede tomar fotografías",
      "Se puede escuchar la misa que se realiza",
      "En su plaza se puede sentar a admirar las actividades que se realizan alrededor",
      "Se puede dar alimentar a las palomas de manera controlada"
    ]
  },
  {
    nombre: "Iglesia Catolica La Catedral",
    categoria: "iglesias",
    descripcion: "Templo histórico y religioso ubicado en el centro de la ciudad, conocido por su arquitectura neoclásica y su importancia cultural.",
    imagenes: [
      "images/catedral_loja.jpg"
    ],
    lat: -3.9989115,
    lng: -79.2016965,
    infoExtra: "La Iglesia Catedral de Loja se localiza en el centro de la ciudad de Loja frente al parque Central de Loja. Es una de las Iglesias más grandes del Ecuador. Es de estilo ecléctico, con elementos historicistas, neoclásicos y corintios.La catedral con su singular estilo arquitectónico, su baldaquino y coros tallados en madera, recibe todos los años a la Virgen del Cisne. <br> La catedral es una iglesia que está conformada por tres naves, es de estilo semi gótico y componen su fachada cuatro cuerpos rematados por una torre y su campanario.<br>Siendo esta la Iglesia Matriz, aquí se recibe cada 20 de Agosto a la Imagen de la Virgen de El Cisne, que es traída en romería desde la Basílica de El Cisne.",
    actividades: [
      "Cambiar", 
      "Cambiar", 
      "Cambiar"
    ]
  },
  {
    nombre: "Museo de Madres Conceptas",
    categoria: "museos",
    descripcion: "Convento colonial convertido en museo religioso.",
    imagenes: [
      "el_sagrario/Museo Madres Conceptas/MMC2.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC1.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC3.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC4.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC5.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC6.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC7.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC8.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC9.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC10.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC11.jpg",
      "el_sagrario/Museo Madres Conceptas/MMC12.jpg",

    ],
    lat: -4.0074,
    lng: -79.2070,
    infoExtra: "En este espacio resalta el tradicional Museo, en donde se conserva al menos unos 70 cuadros de carácter religioso, esculturas, trajes de la liturgia de hace unos 60 años atrás, que se han convertido en la atracción de cientos de turistas de Loja, Ecuador y el mundo. <br>Recorrer el Monasterio es reencontrarse con el pasado. Un salto a la historia para recordar y revivir. Se ubica a pocos metros de la iglesia La Catedral, en el casco céntrico de la ciudad de Loja, en las calles 10 de Agosto entre Bernardo Valdivieso y Olmedo. Fue fundado en 1597, Don Juan de Anderete solicitó la construcción de esta edificación. Es el segundo Monasterio que se creó en la Real Audiencia de Quito.<br>En 1705 se inauguró la pequeña iglesia que se ubica dentro del Monasterio, cuya parte está dada para el actual Museo de las Madres Conceptas, que tiene aproximadamente 300 años de vida, esta edificación es un patrimonio, la cédula de identidad de que Loja fue una ciudad colonial.<br>Otro de los elementos fundamentales en el Monasterio es la presencia de las Hermanas Conceptas, una población de monjas que dedican su vida al convento y claustro de idéntica manera como la vivieron hace unos 700 años atrás por sus antecesoras. ",
    actividades: [
      "Historia religiosa", 
      "Museo", 
      "Fotografía"]
  },
  {
    nombre: "Museo Matilde Hidalgo de Procel",
    categoria: "museos",
    descripcion: "Homenaje a la primera médica y votante de Ecuador.",
    imagenes: [
      "images/museo_Matilde_Hidalgo_de_Procel.jpg"
    ],
    lat: -4.0073,
    lng: -79.2068,
    infoExtra: "Se exhiben objetos personales y logros históricos.",
    actividades: ["Historia", "Cultura", "Educación"]
  },
  {
    nombre: "Museo de la Musica",
    categoria: "museos",
    descripcion: "Espacio cultural dedicado a preservar y difundir la rica tradición musical de la región.",
    imagenes: [
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica1.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica2.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica3.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica4.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica5.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica6.jpg",
      "el_sagrario/Centro Cultural Pio Jaramillo Alvarado/MuseoMusica7.jpg",
    ],
    lat: -4.0073,
    lng: -79.2068,
    infoExtra: "Está ubicado en el histórico edificio del antiguo Colegio Bernardo Valdivieso, restaurado como centro cultural desde el año 2000.<br>En sus salas se exhiben más de 7 000 partituras, unos 10 000 registros musicales y cerca de 65 instrumentos pertenecientes a músicos lojano‑ecuatorianos, cuya trayectoria abarca desde finales del siglo XIX hasta la actualidad.<br>Funciona como museo y también como galería de arte, con un patio central abierto donde se realizan exposiciones temporales, conciertos y talleres educativos de forma periódica . La entrada es gratuita y está abierto de lunes a viernes, generalmente de 8 h a 18 h. Este museo es clave para entender por qué Loja es considerada la “Capital Musical del Ecuador”, pues ofrece una experiencia visual, auditiva y participativa del legado sonoro de la región.",
    actividades: ["Historia", "Cultura", "Educación"]
  },
  {
    nombre: "Mural Rocafuerte",
    categoria: "plazas",
    descripcion: "El mural realizado por jóvenes de quito, cuenca, Riobamba y Loja diseñado para el Festival de Artes Vivas es uno de los 10 murales diseñados para esta fecha, se puede observar el talento de los jóvenes artistas.<br>Su filosofía se basa en celebrar culturas callejeras y las artes que animan el encuentro, la convivencia y el reconocimiento identitario de las comunidades.",
    imagenes: [
      "el_sagrario/Mural Rocafuerte/MuralRocafuerte1.jpg",
    ],
    lat: -4.0073,
    lng: -79.2068,
    infoExtra: "Se exhiben objetos personales y logros históricos.",
    actividades: ["Historia", "Cultura", "Fotografía"]
  },
  {
    nombre: "Plaza San Sebastián",
    categoria: "plazas",
    descripcion: "Plaza con torre reloj y monumento a independencia.",
    imagenes: [
      "images/san_sebastian.jpg"
    ],
    lat: -4.0068,
    lng: -79.2065,
    infoExtra: "La histórica Plaza San Sebastián o  Plaza de la Independencia indica el lugar donde se proclamó la Independencia de la Corona Española, el 18 de noviembre de 1820.<br>El monumento a la Independencia de Loja, también conocida como Torre del Reloj de San Sebastián, es una estructura conmemorativa ubicada en la plaza de San Sebastián (o de la Independencia), de la ciudad de Loja. Concebida para rendir tributo a la independencia de la urbe y su zona de influencia, hecho acaecido el 18 de noviembre de 1820, está considerada como uno de los más sobresalientes atractivos de la ciudad.<br>Ellos plasman el significado de la historia de Loja y su decurrir: en el bronce están representados los aborígenes Paltas y Bracamoros, la Gobernación de Mainas y Yaguarzongo, la Independencia de Loja en 1820 y la institución el Gobierno Federal de Loja, bajo el liderazgo de Manuel Carrión Pizano, cuando Loja proclamó su autonomía en medio de una crisis política que llevó al país al borde de su desaparición.",
    actividades: [
      "Visitar y admirar la iglesia que se encuentra en la misma plaza, se puede escuchar las misas que se celebra",
      "Se puede pasear por la plaza admirar su torre y tomar fotografías",
      "De vez en cuando se realizan eventos en escenario destinado para eventos",
      "Se puede pasear cerca se encuentra casas con un estilo colonial para amantes de la cultura e historia tal como la calle Lourdes."
    ]
  },
  {
    nombre: "Parque Central",
    categoria: "parques",
    descripcion: "Un hermoso parque en el centro de la ciudad, ideal para pasar el rato.",
    imagenes: [
      "Images/parquecentral.jpg"
    ],
    lat: -3.9966556,
    lng: -79.2015829,
    infoExtra: "La Plaza Central de Loja es uno de sus espacios públicos más importantes, rodeada de atractivos como el Museo Arqueológico, la iglesia Catedral, y el Museo Matilde Hidalgo de Procel. En el centro de la Plaza se encuentra una escultura de Bernardo Valdivieso, que fuera benefactor del colegio Bernardo Valdivieso. Aquí se realizan las manifestaciones de religioso cívico y político, a su alrededor se encuentran las edificaciones de gobierno como: Municipalidad, Gobernación de la Provincia, Consejo Provincial, Casa Episcopal, Museo del Banco Central del Ecuador; cercano al parque se cuenta con instituciones bancarias y comerciales que son indicadores de una ciudad progresista.",
    actividades: [
      "Se puede recorrer en familia y admirar los espacios para caminar y distraerse.",
      "El Parque Central, en cuyo centro se encuentra un monumento a Bernardo Valdivieso; el Palacio del Consejo Provincial; Gobernación o Intendencia, la Casa Episcopal y el Palacio Municipal."
    ]
  },
  {
    nombre: "Parque Jipiro",
    categoria: "parques",
    descripcion: "Un hermoso parque en el centro de la ciudad, ideal para pasar el rato.",
    imagenes: [
      "Images/parquejipiro.jpg"
    ],
    lat: -3.9720658,
    lng: -79.2057285,
    infoExtra: "La Unidad Parque Recreacional Jipiro (que en el idioma palta significa, lugar de descanso), constituye una de las principales atracciones de Loja. Está compuesto por más de 10 hectáreas y es conocido también como el parque de la Universalidad Cultural.<br>El parque cuenta con réplicas de las más destacadas expresiones de la arquitectura de cada uno de los grandes troncos etnoculturales de la humanidad.<br>El parque tiene además una laguna artificial con su “Venus” ubicada en el centro de una pequeña isla lo que la hace aún más interesante su visita.  un parque dedicado a las diferentes culturas del mundo, como se puede apreciar en las fotografías, es un lugar para disfrutar es dedicado principalmente a los niños tiene un espacio muy amplio, y se aprovecha de una muy buena manera el agua del río que cruza el parque.<br><br>Estas replicas son: Réplica de la Catedral de San Basilio, Pagoda China (Muelle Bar), Réplica de la Catedral de San Basilio, Réplica de la Catedral de San Basilio, Mezquita Árabe, Puente de Estilo Indo ibérico e Iberoamericano, Chozones de Estilo Bantú o africano, Castillo Euro latino, Pirámide Maya, Puerta del Sol, Baño de la Ñusta Torre Eiffel y Venus de Jipiro.",
    actividades: [
      "Se puede descansar y pasar una tarde en familia en un área verde.",
      "Se puede recorrer las réplicas de expresiones arquitectónicas del mundo.",
      "Se puede tomar fotografías.",
      "Se puede disfrutar de las canchas deportivas como de vóley, básquetbol y futbol.",
      "Se puede pasear por la laguna y alimentar a los animales.",
      "Se puede realizar picnics al aire libre, así como dar uso a sus hornos caseros."

    ]
  },
  {
    nombre: "Puerta de la ciudad",
    categoria: "monumentos",
    descripcion: "Lugar de interes historico.",
    imagenes: [
      "images/puertadelaciudad.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc1.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc2.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc3.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc4.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc5.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc6.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc7.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc8.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc9.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc10.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc11.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc12.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc13.jpg",
      "el_sagrario/puerta_de_la_ciudad/pdc14.jpg"
    ],
    lat: -3.989574,
    lng: -79.20417,
    infoExtra: "La Puerta de la Ciudad, es un monumento arquitectónico, uno de los mayores atractivos... [texto completo según proporcionado].",
    actividades: [
      "<b style='color:#233B54'>Visitar la galería de arqueología:</b> ...",
      "<b style='color:#233B54'>Degustar de la Cafetería:</b> ...",
      "<b style='color:#233B54'>Observar la vista panorámica de la ciudad:</b> ...",
      "<b style='color:#233B54'>Visitar el almacén de artesanías y publicaciones:</b> ..."
    ]
  },
  {
    nombre: "Plazoleta Simon Bolivar",
    categoria: "plazas",
    descripcion: "Descubre la historia local en este museo interactivo.",
    imagenes: [
      "el_sagrario/plazoleta_simon_bolivar/pSB1.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB2.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB3.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB4.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB5.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB6.jpg",
      "el_sagrario/plazoleta_simon_bolivar/pSB7.jpg"
    ],
    lat: 19.430123,
    lng: -99.129876,
    infoExtra: "Este mural rinde homenaje a Simón Bolívar, el líder que luchó por la independencia de varios países sudamericanos del dominio colonial español.Tiene como fondo una serie de líneas que forman el cielo y las montañas, con un mismo color en diferentes tonalidades, a la mitad derecha se encuentran dos montañas nevadas, en el centro tenemos un busto de Simón Bolívar, a la altura de la cintura y el pecho surge la bandera del Ecuador. En el mural de aldo se ve un grupo de soldados bolivarianos vestidos con el uniforme, caminando de espadas al espectador. En un segundo plano se ve un soldado con una franja blanca sobre su pecho, delante de éste un hombre de bigote, con sombrero blanco y un poncho rojo, con su mano derecha sostiene el cabo de una espada.",
    actividades: [
      "Visitar y admirar el mural",
      "A 20 metros se encuentra la Puerta de la ciudad"

    ]
  },
  {
    nombre: "Plaza de San Francisco",
    categoria: ["plazas", "iglesias"],
    descripcion: "un espacio tradicional y concurrido, rodeado de historia, comercio y la emblemática iglesia del mismo nombre.",
    imagenes: [
      "el_sagrario/plaza_san_francisco/iglesiaSF1.jpg",
      "el_sagrario/plaza_san_francisco/iglesiaSF2.jpg",
      "el_sagrario/plaza_san_francisco/iglesiaSF3.jpg",
      "el_sagrario/plaza_san_francisco/iglesiaSF4.jpg",
      "el_sagrario/plaza_san_francisco/iglesiaSF5.jpg",
      "el_sagrario/plaza_san_francisco/plazaSF1.jpg",
      "el_sagrario/plaza_san_francisco/plazaSF2.jpg",
      "el_sagrario/plaza_san_francisco/plazaSF3.jpg",
      "el_sagrario/plaza_san_francisco/plazaSF4.jpg"
    ],
    lat: 19.430123,
    lng: -99.129876,
    infoExtra: "Es una pequeña plaza rodeada por la Iglesia y Convento de los Franciscanos. En su centro se encuentra el Monumento al Capitán Alonso de Mercadillo, fundador de la ciudad de Loja, y hacia el vértice sur-oriental de la plaza, se encuentra la Casa de la Cultura de Loja.<br>Recorriendo el casco colonial encontramos los museos, que recopilan años de historia, tradición y hazañas. Enmarcada por balcones naturales que rodean la ciudad y dejan ver la majestuosidad de su entorno, situando como centinela al Villonaco que, desde su morada, eterno vigilante de sus hijos consiente el desarrollo de sus tierras.<br>Monumento a Alonso de Mercadillo: El capitán Alonso de Mercadillo fundó la ciudad de Loja en el año de 1548 en el valle de Cuxibamba. Nació en Loxa de España y por la costumbre que tenían los conquistadores de dar el nombre de su tierra nativa al lugar que conquistaran, llamó a nuestra ciudad, “Loja de la Inmaculada Concepción.",
    actividades: [
      "Se puede admirar de su iglesia con estilo semiótico con colores resaltantes",
      "Se puede asistir a misa y a eventos en su Iglesia de hermanos franciscanos",
      "Se puede tomar el sol en los bancos de la plaza en las mañanas"
    ]
  },
  {
    nombre: "Parque Simon Bolivar",
    categoria: "parques",
    descripcion: "Un icónico parque que celebra la independencia nacional.",
    imagenes: [
      "images/parquesimonbolivar.jpg"
    ],
    lat: -3.9950751,
    lng: -79.2046976,
    infoExtra: "El Parque Simón Bolívar en Loja, Ecuador, es un espacio verde popular con áreas para picnics. Cuenta con monumentos históricos y estatuas en honor a Simón Bolívar y otros personajes importantes. Además, alberga eventos culturales y festivales. <br> Fue construido como homenaje al Tratado Binacional de Paz de Itamaraty, firmado el 26 de octubre de 1999, en Palacio de Itamaraty en Brasil, marcando el fin de la Guerra del Cenepa entre el Ecuador y Perú.",
    actividades: [
      "Un pequeño espacio que se abre para marcar la entrada hacia el centro desde la Avenida Universitaria, el parque Simón Bolívar es perfecto para pasear y dispersarse sin tener que alejarse mucho del centro.",
      "Con bonitos jardines, pérgolas y espacios amplios para caminar y distraerse; y en el centro, su mayor atractivo y el origen de su nombre, un monumento de 6 imponentes columnas que rodean la estatua de Simón Bolívar, cada una en representación de un país de la Gran Colombia soñada por el Libertador.",
      "Ubicado en la parroquia Loja, con acceso desde la Avenida Universitaria y la calle 18 de Noviembre, entre Imbabura y Colón."

    ]
  }
];

const filterBtn = document.getElementById('toggleFilter');
const filterOptions = document.getElementById('filterOptions');
const lugaresContainer = document.getElementById('lugaresContainer');
const catBtns = document.getElementsByClassName('cat-btn');
const buscador = document.getElementById('buscador');

let categoriaSeleccionada = null;
let textoBusqueda = "";

filterBtn.addEventListener('click', () => {
  filterOptions.classList.toggle('hidden');
});

function mostrarLugares(categoria = null, texto = "") {
  lugaresContainer.innerHTML = '';
  let filtrados = lugares;
  
    window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const lugarBuscado = params.get('lugar');

    if (lugarBuscado) {
      mostrarLugares(null, lugarBuscado);
      buscador.value = lugarBuscado;
    } else {
      mostrarLugares();
    }
  });
  
  if (categoria) {
    filtrados = filtrados.filter(l => {
      const cats = Array.isArray(l.categoria) ? l.categoria : [l.categoria];
      return cats.includes(categoria);
    });
  }
  if (texto && texto.trim() !== "") {
    const textoLower = texto.trim().toLowerCase();
    filtrados = filtrados.filter(l =>
      l.nombre.toLowerCase().includes(textoLower) ||
      l.descripcion.toLowerCase().includes(textoLower)
    );
  }
  if (filtrados.length === 0) {
    lugaresContainer.innerHTML = '<p>No hay lugares que coincidan.</p>';
    return;
  }
  filtrados.forEach((lugar, idx) => {
    const card = document.createElement('div');
    card.className = 'lugar-card';
    const infoExtra = lugar.infoExtra || "";
    const actividades = lugar.actividades && lugar.actividades.length
      ? lugar.actividades.map(act => `<li>${act}</li>`).join('')
      : "<li>No hay actividades registradas.</li>";
    const imagenes = lugar.imagenes || [lugar.imagen];
    card.innerHTML = `
      <div class="carousel" data-idx="${idx}">
        <button class="carousel-prev" style="display:${imagenes.length > 1 ? 'block' : 'none'}">&lt;</button>
        <img src="${imagenes[0]}" alt="${lugar.nombre}" class="lugar-img" data-img="${imagenes[0]}" />
        <button class="carousel-next" style="display:${imagenes.length > 1 ? 'block' : 'none'}">&gt;</button>
      </div>
      <div class="lugar-info">
        <div class="lugar-title">${lugar.nombre}</div>
        <div class="lugar-desc">${lugar.descripcion}</div>
        <div class="lugar-mas-info" id="mas-info-${idx}">
          ${infoExtra}
        </div>
        <div class="lugar-actividades-info" id="actividades-info-${idx}">
          <ul style="margin:0 0 10px 18px;padding:0;color:#4a627a;font-size:0.98em;">
            ${actividades}
          </ul>
        </div>
        <div class="botones-centrados">
          <button class="ver-mas-btn" data-idx="${idx}">Ver más</button>
          <button class="maps-btn" onclick="abrirMaps(${lugar.lat},${lugar.lng})">
            Ver en Maps
          </button>
          <button class="actividades-btn" data-idx="${idx}">Actividades</button>
        </div>
      </div>
    `;
    lugaresContainer.appendChild(card);
  });

  Array.from(catBtns).forEach(btn => {
    btn.addEventListener('click', () => {
      const categoria = btn.getAttribute('data-category');
      categoriaSeleccionada = categoria === "ninguno" ? null : categoria;
      mostrarLugares(categoriaSeleccionada, textoBusqueda);
    });
  });
  document.querySelectorAll('.lugar-img').forEach(img => {
    img.addEventListener('click', function() {
      const src = img.getAttribute('data-img');
      const alt = img.getAttribute('alt') || "Imagen ampliada";
      document.getElementById('imgModalImg').src = src;
      document.getElementById('imgModalImg').alt = alt;
      const downloadBtn = document.getElementById('downloadImgBtn');
      downloadBtn.href = src;
      downloadBtn.setAttribute('download', alt.replace(/\s+/g, '_').toLowerCase());
      document.getElementById('imgModal').classList.add('active');
    });
  });
  document.querySelectorAll('.ver-mas-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const idx = btn.getAttribute('data-idx');
      const infoDiv = document.getElementById('mas-info-' + idx);
      const isVisible = infoDiv.classList.contains('visible');
      document.querySelectorAll('.lugar-mas-info').forEach(div => div.classList.remove('visible'));
      document.querySelectorAll('.ver-mas-btn').forEach(b => {
        b.textContent = 'Ver más';
        b.classList.remove('active');
      });
      if (!isVisible) {
        infoDiv.classList.add('visible');
        btn.textContent = 'Ocultar';
        btn.classList.add('active');
      }
    });
  });
  document.querySelectorAll('.actividades-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const idx = btn.getAttribute('data-idx');
      const actDiv = document.getElementById('actividades-info-' + idx);
      const isVisible = actDiv.classList.contains('visible');
      document.querySelectorAll('.lugar-actividades-info').forEach(div => div.classList.remove('visible'));
      document.querySelectorAll('.actividades-btn').forEach(b => {
        b.textContent = 'Actividades';
        b.classList.remove('active');
      });
      if (!isVisible) {
        actDiv.classList.add('visible');
        btn.textContent = 'Ocultar';
        btn.classList.add('active');
      }
    });
  });
  const carousels = document.querySelectorAll('.carousel');
  carousels.forEach(carousel => {
    const idx = carousel.getAttribute('data-idx');
    let current = 0;
    const lugar = filtrados[idx];
    const imagenes = lugar.imagenes || [lugar.imagen];
    const imgEl = carousel.querySelector('.lugar-img');
    const prevBtn = carousel.querySelector('.carousel-prev');
    const nextBtn = carousel.querySelector('.carousel-next');
    function updateImg() {
      imgEl.src = imagenes[current];
      imgEl.setAttribute('data-img', imagenes[current]);
    }
    if (prevBtn) prevBtn.addEventListener('click', e => {
      e.stopPropagation();
      current = (current - 1 + imagenes.length) % imagenes.length;
      updateImg();
    });
    if (nextBtn) nextBtn.addEventListener('click', e => {
      e.stopPropagation();
      current = (current + 1) % imagenes.length;
      updateImg();
    });
  });
}

buscador.addEventListener('input', function() {
  textoBusqueda = buscador.value;
  mostrarLugares(categoriaSeleccionada, textoBusqueda);
});

Array.from(catBtns).forEach(btn => {
  btn.addEventListener('click', () => {
    Array.from(catBtns).forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    categoriaSeleccionada = btn.dataset.category;
    mostrarLugares(categoriaSeleccionada, textoBusqueda);
    filterOptions.classList.add('hidden');
  });
});

document.addEventListener('click', function(event) {
  const isFilterBtn = filterBtn.contains(event.target);
  const isFilterOptions = filterOptions.contains(event.target);
  if (!isFilterBtn && !isFilterOptions) {
    filterOptions.classList.add('hidden');
  }
});

window.abrirMaps = function(lat, lng) {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        const userLat = pos.coords.latitude;
        const userLng = pos.coords.longitude;
        const url = `https://www.google.com/maps/dir/?api=1&origin=${userLat},${userLng}&destination=${lat},${lng}&travelmode=driving`;
        window.open(url, '_blank');
      },
      () => {
        const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`;
        window.open(url, '_blank');
      }
    );
  } else {
    const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`;
    window.open(url, '_blank');
  }
}

mostrarLugares();

const categoryFilter = document.querySelector('.category-filter');
window.addEventListener('scroll', () => {
  const rect = categoryFilter.getBoundingClientRect();
  if (rect.top <= 0) {
    categoryFilter.classList.add('stuck');
  } else {
    categoryFilter.classList.remove('stuck');
  }
});
document.getElementById('closeImgModal').addEventListener('click', function() {
  document.getElementById('imgModal').classList.remove('active');
});
document.getElementById('imgModal').addEventListener('click', function(e) {
  if (e.target === this) {
    this.classList.remove('active');
  }
});
  </script>
</body>
</html>